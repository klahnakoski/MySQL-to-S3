{
	"extract": {
		"last": "output/treeherder_last_run.json",
		"field": ["last_modified", "id"],
		"type": ["time", "number"],
		"start": ["1jan2015", 0],
		"batch": ["day", 10000],
		"ids": "select last_modified, id from job where last_modified>='{{last.last_modified}}' order by last_modified, id limit 10001"
//		"ids": "select id from (select last_modified, id from job where id between {{last.id}}-10000000 and {{last.id}}+10000000) a where last_modified>='{{last.last_modified}}' limit 10000000"
//		"ids": "select id from (select last_modified, id from job where id between {{last.id}}-10000000 and {{last.id}}+10000000) a where last_modified>='{{last.last_modified}}' and last_modified<date_add(date_add('{{last.last_modified}}', INTERVAL 1 DAY), INTERVAL 1 HOUR) limit 10000000"
		//		"ids": "select id from (select last_modified, id from job order by id desc limit 1000000) a where last_modified>='{{last.last_modified}}' limit 10000000"
	},
	"destination": {
		"bucket": "active-data-treeherder-jobs",
		"public": true,
		"key_format": "a",
		"$ref": "file://~/private.json#aws_credentials"
	},
	"snowflake": {
		"fact_table": "job",
		"show_foreign_keys": false,
		"null_values": [
			"-",
			"unknown",
			""
		],
		"add_relations": [
			"treeherder.performance_datum.ds_job_id -> treeherder.job.project_specific_id",
			"treeherder.performance_datum.repository_id -> treeherder.job.repository_id",
			"treeherder.job.option_collection_hash -> treeherder.option_collection.option_collection_hash"
		],
		"include": [
		],
		"exclude": [
			"runnable_job",
			"auth_user",
			"job_log",
			"text_log_step",
			//		"commit",
			"performance_datum",
			"performance_alert_summary",
			"performance_signature"
		],
		"reference_only": [
			"user.email",
			"repository.name",
			"machine_platform.platform",
			"failure_classification.name",
			"option.name"
		],
		"database": {
			"schema": "treeherder",
			"username": "activedata",
			"$ref": "~/private.json#treeherder"
		}
	},
	"debug":{
		"trace":true,
		"profile":true
	}
}
